<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">

<head>
    <% include ../../../partials/head %>
</head>

<body class="fixed-nav sticky-footer bg-dark" id="page-top">

    <header>
        <% include ../../../partials/header %>
    </header>

    <div ng-app="" class="content-wrapper">
        <div class="container-fluid">
            <!-- Breadcrumbs-->
            <ol class="breadcrumb">
                 <li class="breadcrumb-item">
                    <a href="/dashboard/">Dashboard</a>
                </li>
                <li class="breadcrumb-item">{{department}}</li>
                <li class="breadcrumb-item">
                    <a href="/bot-growth/intents">Intents</a>
                </li>
                <li class="breadcrumb-item active">
                    {{name}}
                </li>
            </ol>
            <div class="row">
                <div class="col-12">
                    <div>
                        <h1 class="ml-auto">{{name}}  
                        <span class="btn-right">
                            <input type="checkbox" id="toggleStatus"> 
                            <button class="btn btn-danger">Delete</button></span>
                        <div class="clear-both"></div>
                        </h1>
                    </div>
                    <form id="putIntent" action="/" method="get">
                        <div class="">
                            <div class="form-group">
                                <label for="intent-name">Intent Name</label>
                                <input type="text" class="form-control" value="<%=intent.name%>" ng-model="name" ng-init="name='<%=intent.name%>'"name="name" placeholder="<%=intent.name%>" >
                            </div>
                             <div class="form-group">
                                <label for="intent-description">Associated Department</label>
                                <select class="form-control" ng-model="department" name="department" ng-init="department='<%=intent.department%>'" value="<%=department%>">
                                <% let x=1,y=0;
                                    for(let i=0; i<departments.length; i++){
                                        if(intent.department == departments[i]._id){%>
                                    <option selected value="<%=departments[i]._id%>"><%=departments[i].friendlyName%></option>
                                           <% }else if(x==y){%>
                                    <option value="<%=departments[i]._id%>"><%=departments[i].friendlyName%></option>
                                <%}}%>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="intent-trigger">New Synonyms</label>
                                <input type="text" class="form-control" id="newSynonym" placeholder="Add New Synonyms ">
                            </div>
                            <div class="form-group">
                                <label for="intent-answer">Synonyms</label>
                                <div id="synonymsList">
                                    <% for(i=0; i<intent.synonyms.length; i++){ 
                                        var syn = intent.synonyms[i] %>
                                    <input type="text" class="form-control" class="Synonyms" placeholder="<%=syn%>" value="<%=syn%>">
                                    <% } %>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="intent-answer">Bot Answer</label>
                                <input type="text" class="form-control" name="intnet.answer" placeholder="<%=intent.answer%>" value="<%=intent.sanswer%>">
                            </div>
                            <div class="form-group">
                                <input readonly type="hidden" class="form-control" name="status" value="<%=intent._id%>">
                                <input readonly type="text" class="form-control" name="status" value="<%=intent.disabled%>">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <input id="save" onclick="validate()" value="Save Changes" class="btn btn-primary">
                            <input id="cancel" onclick="returnOne()" value="Cancel" class="btn btn-secondary">
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- /.container-fluid-->
        <!-- /.content-wrapper-->
        <script>
            var input = document.getElementById("newSynonym");

            // Execute a function when the user releases a key on the keyboard
            input.addEventListener("keyup", function(event) {
            // Cancel the default action, if needed
            event.preventDefault();
            // Number 13 is the "Enter" key on the keyboard
            if (event.keyCode === 13) {
                // Trigger the button element with a click
                updateSynList(input.value)
                
            }
            });
            function validate(){
                document.getElementById('putIntent').submit();
            }
            function updateSynList(syn){
                alert(syn +' has been added')
                var  synlist = document.getElementById('synonymsList').innerHTML
                synlist = synlist + '<input type="text" class="form-control" class="Synonyms" placeholder="'+syn+'" value="'+syn+'">'
            }
        </script>
        <% include ../../../partials/footer %>


</body>

</html>